<header class="admin-header">
  <div class="admin-header__title">
    <h1>Gesti√≥n de Usuarios</h1>
    <p>Crear, editar y gestionar los accesos de tu equipo.</p>
  </div>
  <nav class="admin-header__nav">
    <a routerLink="/agv" class="nav-link">Simulador de AGV</a>
    
    <div class="add-user-wrapper">
      <button class="btn btn-primary" (click)="showForm = !showForm">
        <span class="icon">+</span> A√±adir Usuario
      </button>

      <div class="form-inline" *ngIf="showForm" @fade>
        <div class="form-card">
          <h3>{{ isEditing ? 'Editar Usuario' : 'Nuevo Usuario' }}</h3>
          <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label>Nombre</label>
              <input type="text" formControlName="nombre" placeholder="Nombre completo del usuario">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" formControlName="email" placeholder="email@ejemplo.com">
            </div>
            <div class="form-group">
              <label>Contrase√±a {{ isEditing ? '(Opcional: rellena solo para cambiar)' : '' }}</label>
              <input type="password" formControlName="contrasena" placeholder="M√≠nimo 6 caracteres">
            </div>
            <div class="form-group-checkbox">
              <input type="checkbox" formControlName="activo" id="activo">
              <label for="activo">Cuenta Activa</label>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-secondary" (click)="closeForm()">Cancelar</button>
              <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Guardar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <button class="btn btn-primary" (click)="logout()">Salir</button>
  </nav>
</header>

<main>
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th class="hide-on-mobile">Email</th>
          <th class="hide-on-mobile">Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users" class="user-row">
          <td>{{ user.nombre }}</td>
          <td class="hide-on-mobile">{{ user.email }}</td>
          <td class="hide-on-mobile">
            <span class="status" [class.status--active]="user.activo" [class.status--inactive]="!user.activo">
              {{ user.activo ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td class="actions-cell">
            <button class="btn-icon" title="Editar Usuario" (click)="openEditForm(user)">‚úèÔ∏è</button>
            <button class="btn-icon btn-icon--danger" title="Eliminar Usuario" (click)="deleteUser(user._id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</main>